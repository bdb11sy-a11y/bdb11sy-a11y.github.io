<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø§Ù„Ø¹Ø¨Ø§Ø¯ÙŠ â€“ Ø´Ø­Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª</title>

<style>
body{
  margin:0;
  font-family:Arial;
  direction:rtl;
  background:linear-gradient(#e0f2fe,#f8fafc);
}
header{
  background:#0f172a;
  color:#fff;
  padding:12px 15px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
header .user{font-size:14px}
.logout{
  background:#dc2626;
  color:#fff;
  border:none;
  padding:6px 12px;
  border-radius:6px;
  cursor:pointer;
}
.card{
  background:#fff;
  margin:15px;
  padding:15px;
  border-radius:12px;
  box-shadow:0 5px 15px rgba(0,0,0,.1);
}
.hidden{display:none}

input,button{
  width:100%;
  padding:10px;
  margin-top:10px;
  font-size:15px;
}
button{
  border:none;
  border-radius:8px;
  cursor:pointer;
}
.green{background:#22c55e;color:#fff}
.orange{background:#f59e0b;color:#fff}
.red{background:#dc2626;color:#fff}

.apps{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:10px;
}
.app{
  text-align:center;
  padding:10px;
  border-radius:10px;
  border:2px solid transparent;
  cursor:pointer;
}
.app img{width:45px;height:45px}
.app.active{border-color:#2563eb}

.price{
  padding:10px;
  border:1px solid #ddd;
  border-radius:8px;
  margin-top:8px;
  cursor:pointer;
}
.price.active{
  background:#2563eb;
  color:#fff;
}

#rates{
  position:fixed;
  bottom:0;
  left:0;
  right:0;
  background:#0f172a;
  color:#fff;
  text-align:center;
  padding:6px;
  font-size:14px;
}
</style>
</head>

<body>

<header>
  <div class="user" id="headerUser"></div>
  <div>Ø§Ù„Ø¹Ø¨Ø§Ø¯ÙŠ â€“ Ø´Ø­Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª</div>
  <button class="logout hidden" id="logoutBtn" onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
</header>

<!-- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
<div class="card" id="loginBox">
  <h3>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h3>
  <input id="username" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
  <input id="password" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±">
  <button class="green" onclick="login()">Ø¯Ø®ÙˆÙ„</button>
</div>

<!-- Ø§Ù„Ø·Ù„Ø¨ -->
<div class="card hidden" id="orderBox">
  <h3 id="welcome"></h3>

  <div class="apps">
    <div class="app" onclick="selectApp('likee',this)">
      <img src="likee.jpg"><div>likee</div>
    </div>
    <div class="app" onclick="selectApp('yahlan',this)">
      <img src="yahlan.jpg"><div>yahlan</div>
    </div>
    <div class="app" onclick="selectApp('4fun',this)">
      <img src="4fun.jpg"><div>4fun</div>
    </div>
    <div class="app" onclick="selectApp('jawaker',this)">
      <img src="jawaker.jpg"><div>jawaker</div>
    </div>
  </div>

  <div id="prices"></div>
  <input id="userid" placeholder="ID Ø§Ù„Ø­Ø³Ø§Ø¨">
<input type="file" id="attachment" accept="image/*,.pdf">
  <button class="green" onclick="sendOrder()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
  <button class="orange" onclick="sendNote()">Ø¥Ø±Ø³Ø§Ù„ Ù…Ù„Ø§Ø­Ø¸Ø©</button>

  <a href="https://wa.me/905396956440">
    <button class="green">ØªÙˆØ§ØµÙ„ ÙˆØ§ØªØ³Ø§Ø¨</button>
  </a>
</div>

<!-- Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† -->
<div class="card hidden" id="adminBox">
  <h3>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h3>
  <input id="newUser" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
  <input id="newPass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±">
  <button class="green" onclick="addUser()">Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù…</button>
  <div id="usersList"></div>
</div>

<div id="rates">
  ğŸ’µ USD: 32.50 TL | ğŸ’¶ EUR: 35.20 TL
</div>

<script>
/* ===== ØªÙ„ØºØ±Ø§Ù… ===== */
const BOT_TOKEN = "8313946628:AAHSXwgg619cSyYom9-abBN_eyOnfQzQWfw"; // ğŸ‘ˆ Ø­Ø· Ø§Ù„ØªÙˆÙƒÙ† Ù‡ÙˆÙ†
const CHAT_ID  = "154287241";

/* ===== Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ===== */
let users = JSON.parse(localStorage.getItem("users"));
if(!users){
  users = { abnabbad:{password:"199511",role:"admin"} };
  localStorage.setItem("users",JSON.stringify(users));
}

const pricesData = {
  likee:["1000ğŸ’ â€“ 950TL","1500ğŸ’ â€“ 1375TL","2000ğŸ’ â€“ 1850TL","3000ğŸ’ â€“ 2900TL","4000ğŸ’ â€“ 3750TL","5000ğŸ’ â€“ 4700TL"],
  yahlan:["1000ğŸ’ â€“ 125TL","2000ğŸ’ â€“ 225TL","5000ğŸ’ â€“ 475TL","10000ğŸ’ â€“ 950TL","20000ğŸ’ â€“ 1850TL","50000ğŸ’ â€“ 4850TL"],
  "4fun":["300KğŸ’ â€“ 950TL","500KğŸ’ â€“ 1700TL","600KğŸ’ â€“ 1850TL","1MğŸ’ â€“ 3200TL","1.5MğŸ’ â€“ 4650TL"],
  jawaker:["10KğŸª™ â€“ 100TL","20KğŸª™ â€“ 175TL","25KğŸª™ â€“ 200TL","30KğŸª™ â€“ 250TL","50KğŸª™ â€“ 350TL","70KğŸª™ â€“ 500TL","100KğŸª™ â€“ 650TL","200KğŸª™ â€“ 1250TL","300KğŸª™ â€“ 1850TL","500KğŸª™ â€“ 3000TL","1MğŸª™ â€“ 5300TL"]
};

let currentUser="",selectedApp="",selectedPrice="";

/* ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ */
function login(){
  if(!users[username.value] || users[username.value].password!==password.value){
    alert("Ø¨ÙŠØ§Ù†Ø§Øª Ø®Ø§Ø·Ø¦Ø©");return;
  }
  localStorage.setItem("loggedUser",username.value);
  location.reload();
}

/* === Ø¯Ø¹Ù… Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø· (Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø²Ø¨Ø§Ø¦Ù†) === */
const params = new URLSearchParams(window.location.search);
const urlUser = params.get("u");
const urlPass = params.get("p");

if(urlUser && urlPass){
  let users = JSON.parse(localStorage.getItem("users")) || {};
  if(!users[urlUser]){
    users[urlUser] = { password: urlPass, role: "user" };
    localStorage.setItem("users", JSON.stringify(users));
  }
  
  localStorage.setItem("loggedUser", urlUser);
  history.replaceState({}, document.title, location.pathname);
}
/* ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¬Ù„Ø³Ø© */
window.onload=()=>{
  const u=localStorage.getItem("loggedUser");
  if(u){
    currentUser=u;
    loginBox.classList.add("hidden");
    orderBox.classList.remove("hidden");
    logoutBtn.classList.remove("hidden");
    headerUser.innerText="Ù…Ø±Ø­Ø¨Ø§Ù‹ "+u;
    welcome.innerText="Ù…Ø±Ø­Ø¨Ø§Ù‹ "+u;
    if(users[u].role==="admin"){
      adminBox.classList.remove("hidden");
      loadUsers();
    }
  }
};

/* ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬ */
function logout(){
  localStorage.removeItem("loggedUser");
  location.reload();
}

/* Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ */
function selectApp(app,el){
  selectedApp=app;selectedPrice="";
  document.querySelectorAll(".app").forEach(a=>a.classList.remove("active"));
  el.classList.add("active");
  prices.innerHTML="";
  pricesData[app].forEach(p=>{
    let d=document.createElement("div");
    d.className="price";
    d.innerText=p;
    d.onclick=()=>{
      document.querySelectorAll(".price").forEach(x=>x.classList.remove("active"));
      d.classList.add("active");
      selectedPrice=p;
    };
    prices.appendChild(d);
  });
}

/* Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ */
async function sendOrder(){

  // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
  if(!selectedApp || !selectedPrice || !userid.value){
    alert("âš ï¸ Ø£ÙƒÙ…Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
    return;
  }

  const fileInput = document.getElementById("attachment");
  const file = fileInput.files[0];

  // Ù…Ù†Ø¹ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¨Ø¯ÙˆÙ† Ø¥Ø´Ø¹Ø§Ø±
  if(!file){
    alert("âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø±ÙØ§Ù‚ Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„ØªØ­ÙˆÙŠÙ„ (Dekont Ø£Ùˆ Ù„Ù‚Ø·Ø© Ø´Ø§Ø´Ø©)");
    return;
  }

  // Ù†Øµ Ø§Ù„Ø·Ù„Ø¨
  let caption =
    "ğŸ†• Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯\n" +
    "ğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: " + currentUser + "\n" +
    "ğŸ“± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚: " + selectedApp + "\n" +
    "ğŸ’° Ø§Ù„Ø¨Ø§Ù‚Ø©: " + selectedPrice + "\n" +
    "ğŸ†” ID: " + userid.value;

  // ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
  const formData = new FormData();
  formData.append("chat_id", CHAT_ID);
  formData.append("caption", caption);

  try {
    if(file.type.startsWith("image/")){
      formData.append("photo", file);
      await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
        method: "POST",
        body: formData
      });
    } else {
      formData.append("document", file);
      await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendDocument`, {
        method: "POST",
        body: formData
      });
    }

    alert("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­");

    // ØªÙ†Ø¸ÙŠÙ Ø§Ù„ØµÙØ­Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
    userid.value = "";
    fileInput.value = "";
    selectedApp = "";
    selectedPrice = "";
    prices.innerHTML = "";
    document.querySelectorAll(".app").forEach(a => a.classList.remove("active"));

  } catch (e) {
    alert("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„");
  }
}
/* Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† */
function addUser(){
  if(!newUser.value||!newPass.value){alert("Ø£ÙƒÙ…Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");return;}
  users[newUser.value]={password:newPass.value,role:"user"};
  localStorage.setItem("users",JSON.stringify(users));
  newUser.value="";newPass.value="";
  loadUsers();
}
function loadUsers(){
  usersList.innerHTML="";
  Object.keys(users).forEach(u=>{
    if(u==="abnabbad")return;
    usersList.innerHTML+=`<div>${u}
      <button class="red" onclick="deleteUser('${u}')">Ø­Ø°Ù</button></div>`;
  });
}
function deleteUser(u){
  delete users[u];
  localStorage.setItem("users",JSON.stringify(users));
  loadUsers();
}
</script>

</body>
  </html>
