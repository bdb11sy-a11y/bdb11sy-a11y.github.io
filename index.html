<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø§Ù„Ø¹Ø¨Ø§Ø¯ÙŠ â€“ Ø´Ø­Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª</title>

<style>
body{
  margin:0;
  font-family:Arial;
  direction:rtl;
  background:linear-gradient(#e0f2fe,#f8fafc);
}
header{
  background:#0f172a;
  color:#fff;
  padding:12px 15px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.user{font-size:14px}
.logout{
  background:#dc2626;
  color:#fff;
  border:none;
  padding:6px 12px;
  border-radius:6px;
  cursor:pointer;
}
.card{
  background:#fff;
  margin:15px;
  padding:15px;
  border-radius:12px;
  box-shadow:0 5px 15px rgba(0,0,0,.1);
}
.hidden{display:none}

input,textarea,button,select{
  width:100%;
  padding:10px;
  margin-top:8px;
  font-size:14px;
}
button{border:none;border-radius:8px;cursor:pointer}
.green{background:#22c55e;color:#fff}
.orange{background:#f59e0b;color:#fff}
.red{background:#dc2626;color:#fff}

.apps{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:10px;
}
.app{
  text-align:center;
  padding:10px;
  border-radius:10px;
  border:2px solid transparent;
  cursor:pointer;
}
.app.active{border-color:#2563eb}
.app img{width:45px;height:45px}

.price{
  border:1px solid #ddd;
  padding:8px;
  border-radius:6px;
  margin-top:5px;
  cursor:pointer;
}
.price.active{background:#2563eb;color:#fff}

hr{margin:15px 0}
</style>
</head>

<body>

<header>
  <div class="user" id="headerUser"></div>
  <div>Ø§Ù„Ø¹Ø¨Ø§Ø¯ÙŠ â€“ Ø´Ø­Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª</div>
  <button id="logoutBtn" class="logout hidden" onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
</header>

<!-- LOGIN -->
<div class="card" id="loginBox">
  <h3>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h3>
  <input id="username" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
  <input id="password" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±">
  <button class="green" onclick="login()">Ø¯Ø®ÙˆÙ„</button>
</div>

<!-- ORDER -->
<div class="card hidden" id="orderBox">
  <h3 id="welcome"></h3>
  <div class="apps" id="appsBox"></div>
  <div id="prices"></div>
  <input id="userid" placeholder="ID Ø§Ù„Ø­Ø³Ø§Ø¨">
  <button class="green" onclick="sendOrder()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
</div>

<!-- ADMIN -->
<div class="card hidden" id="adminBox">
  <h3>Ù„ÙˆØ­Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª</h3>

  <input id="appName" placeholder="Ø§Ø³Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ (small letters)">
  <input id="appImg" placeholder="Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚">
  <textarea id="appPrices" rows="5" placeholder="ÙƒÙ„ Ø³Ø¹Ø± Ø¨Ø³Ø·Ø±"></textarea>

  <button class="green" onclick="saveApp()">Ø­ÙØ¸ / ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</button>

  <hr>

  <select id="deleteSelect"></select>
  <button class="red" onclick="deleteApp()">Ø­Ø°Ù Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</button>
</div>

<script>
/* ===== Telegram ===== */
const BOT_TOKEN = "PUT_YOUR_TOKEN_HERE";
const CHAT_ID = "154287241";

/* ===== USERS ===== */
let users = JSON.parse(localStorage.getItem("users")) || {
  abnabbad:{password:"199511",role:"admin"}
};
localStorage.setItem("users",JSON.stringify(users));

/* ===== APPS ===== */
let appsData = JSON.parse(localStorage.getItem("appsData"));
if(!appsData){
  appsData = {
    likee:{
      img:"https://upload.wikimedia.org/wikipedia/en/9/9e/Likee_logo.png",
      prices:["1000ğŸ’ â€“ 950TL","1500ğŸ’ â€“ 1375TL"]
    },
    yahlan:{
      img:"https://cdn-icons-png.flaticon.com/512/2462/2462719.png",
      prices:["1000ğŸ’ â€“ 125TL","2000ğŸ’ â€“ 225TL"]
    }
  };
  localStorage.setItem("appsData",JSON.stringify(appsData));
}

let currentUser="",selectedApp="",selectedPrice="";

/* LOGIN */
function login(){
  if(!users[username.value]||users[username.value].password!==password.value){
    alert("Ø¨ÙŠØ§Ù†Ø§Øª Ø®Ø§Ø·Ø¦Ø©");return;
  }
  localStorage.setItem("loggedUser",username.value);
  location.reload();
}

window.onload=()=>{
  const u=localStorage.getItem("loggedUser");
  if(!u) return;
  currentUser=u;
  loginBox.classList.add("hidden");
  orderBox.classList.remove("hidden");
  logoutBtn.classList.remove("hidden");
  headerUser.innerText="Ù…Ø±Ø­Ø¨Ø§Ù‹ "+u;
  welcome.innerText="Ù…Ø±Ø­Ø¨Ø§Ù‹ "+u;
  renderApps();
  if(users[u].role==="admin"){
    adminBox.classList.remove("hidden");
    refreshDelete();
  }
};

function logout(){
  localStorage.removeItem("loggedUser");
  location.reload();
}

/* RENDER */
function renderApps(){
  appsBox.innerHTML="";
  Object.keys(appsData).forEach(a=>{
    appsBox.innerHTML+=`
      <div class="app" onclick="selectApp('${a}',this)">
        <img src="${appsData[a].img}">
        <div>${a}</div>
      </div>`;
  });
}

function selectApp(app,el){
  selectedApp=app;selectedPrice="";
  document.querySelectorAll(".app").forEach(x=>x.classList.remove("active"));
  el.classList.add("active");
  prices.innerHTML="";
  appsData[app].prices.forEach(p=>{
    let d=document.createElement("div");
    d.className="price";
    d.innerText=p;
    d.onclick=()=>{
      document.querySelectorAll(".price").forEach(x=>x.classList.remove("active"));
      d.classList.add("active");
      selectedPrice=p;
    };
    prices.appendChild(d);
  });
}

/* ORDER */
function sendOrder(){
  if(!selectedApp||!selectedPrice||!userid.value){
    alert("Ø£ÙƒÙ…Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");return;
  }
  let text=`ğŸ†• Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯\nğŸ‘¤ ${currentUser}\nğŸ“± ${selectedApp}\nğŸ’° ${selectedPrice}\nğŸ†” ${userid.value}`;
  if(BOT_TOKEN!=="PUT_YOUR_TOKEN_HERE"){
    fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(text)}`);
  }
  alert("ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„");
}

/* ===== ADMIN ===== */
function saveApp(){
  if(!appName.value||!appImg.value||!appPrices.value){
    alert("Ø£ÙƒÙ…Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");return;
  }
  appsData[appName.value]={
    img:appImg.value,
    prices:appPrices.value.split("\n").filter(x=>x)
  };
  localStorage.setItem("appsData",JSON.stringify(appsData));
  renderApps();
  refreshDelete();
  alert("ØªÙ… Ø§Ù„Ø­ÙØ¸");
}

function refreshDelete(){
  deleteSelect.innerHTML="";
  Object.keys(appsData).forEach(a=>{
    deleteSelect.innerHTML+=`<option>${a}</option>`;
  });
}

function deleteApp(){
  let a=deleteSelect.value;
  if(!confirm("Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø­Ø°ÙØŸ"))return;
  delete appsData[a];
  localStorage.setItem("appsData",JSON.stringify(appsData));
  renderApps();
  refreshDelete();
}
</script>

</body>
  </html>
